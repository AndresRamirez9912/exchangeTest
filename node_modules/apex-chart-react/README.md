# apex-chart-react

This is the apex-chart as an npm package.

## Installation:

`npm install --save apex-chart-react`

## Usage:

### Step 1, Import:

`import ApexChartBuilder from 'apex-chart-react'`

### Step 2, Instantiate:

`const chart = new ApexChartBuilder('alphapoint', {'instrument_id': 2});`

First argument is the target element's ID. 

Second argument is the config object. Pass in an object with any number of config options, defaults will be used for any unprovided options.

`'instrument_id'` is a new configuration option for apex-chart-react. Defaults to 1.

#### Passing data

##### 1) RxJS sample:
You can pass chartDataSubject option in config object to establish connection via RxJS subject

```
import { BehaviorSubject } from 'rxjs';

this.chartDataSubject = new BehaviorSubject(chartData);
const chartConfig = {
  chartDataSubject: this.chartDataSubject,
  ...
}

componentDidUpdate(prevProps) {
  if (prevProps.chartData !== this.props.chartData) {
    this.chartDataSubject.next(this.props.chartData);
  }
}
```
chartData in this case should contain all needed values for chart updates:

`chartData: { level1, level2, tickers, selectedInstrumentId }`

##### 2) Manually updates sample:
In case of passing chartData to chart we should control all data changes on client side and call appropriate methods to update this data.

React usage example:

```
  componentDidMount() {
    const chartConfig = {
      'instrument_id': 2,
      chartData: { level2, tickers, marketPrice },
    }
    this.chart = new ApexChartBuilder('alphapoint', chartConfig);
  }

  componentDidUpdate(prevProps) {
    if (prevProps.level2 !== this.props.level2) {
      this.chart.UpdateLevel2Data(this.props.level2);
    }
    if (prevProps.tickers.tickers !== this.props.tickers.tickers) {
      this.chart.UpdateTickersData(this.props.tickers.tickers);
    }
    if (prevProps.tickers.fetching !== this.props.tickers.fetching) {
      this.chart.OnLoadingStateChange(this.props.tickers.fetching);
    }
    if (prevProps.marketPrice !== this.props.marketPrice) {
      this.chart.UpdateMarketPrice(this.props.marketPrice);
    }
  }
```

All other configuration options can be found here:
https://github.com/alphapoint/apex-chart

### Step 3, Draw Chart:

`chart.DrawChart();`

### Step 4, Add Styles:

you can pull in the chart's styles by adding:

`import 'apex-chart-react/lib/chart-style.css'`

If the chart looks squished vertically just add `#alphapoint { height: 750px }` or some similar value to your css.

## Notes

Default source of data is `wss://api_demo2.alphapoint.com/WSGateway/`. Change by passing a different uri via the configuration by setting:
```
'alphapoint_api': {
    'uri': 'wss://api_demo2.alphapoint.com/WSGateway/'
 }
  ```

## Authors

* **Chris Stevens** - *Conversion to NPM package* - [AlphaPoint](https://github.com/chrisstevensap)

* **Dave Brushinski** - *Initial work* - [AlphaPoint](https://github.com/dbrushinski)

See also the list of [contributors](https://github.com/alphapoint/apex-chart/contributors) who participated in this project.
